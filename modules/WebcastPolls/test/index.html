<html>
<head>
	<title>polls demo</title>
	<script type="text/javascript" src="/html5.kaltura/mwEmbed/tests/qunit/qunit-bootstrap.js"></script>
	<script type="text/javascript" src="/html5.kaltura/mwEmbed/mwEmbedLoader.php"></script>
	<script type="text/javascript" src="/html5.kaltura/mwEmbed/docs/js/doc-bootstrap.js"></script>
	<meta charset=UTF-8>


</head>
<body>
	<h1>polls demo</h1>
	<div id="kaltura_player" style="width: 885px; height: 630px;float: left;"></div>
	<div id="qnaListHolder" style="width: 300px; height: 330px; float:left; float: left"></div>
	<br style="clear: both;" /><br />

<script>

    var qna= {
        'plugin': true,
        'qnaTargetId': 'qnaListHolder',
        'qnaPollingInterval': 5000,
        'onPage': true,
        'containerPosition': 'right',
        'moduleWidth' : '200',
        'userId': "Shimi",
        'userRole':"userRole", //anonymousRole
        'allowNewQuestionWhenNotLive': true
    };

    var QueryString = function () {
        // This function is anonymous, is executed immediately and
        // the return value is assigned to QueryString!
        var query_string = {};
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i=0;i<vars.length;i++) {
            var pair = vars[i].split("=");
            // If first entry with this name
            if (typeof query_string[pair[0]] === "undefined") {
                query_string[pair[0]] = decodeURIComponent(pair[1]);
                // If second entry with this name
            } else if (typeof query_string[pair[0]] === "string") {
                var arr = [ query_string[pair[0]],decodeURIComponent(pair[1]) ];
                query_string[pair[0]] = arr;
                // If third or later entry with this name
            } else {
                query_string[pair[0]].push(decodeURIComponent(pair[1]));
            }
        }
        return query_string;
    }();
    var paramFromUrl = function(key){
		if(QueryString[key]){
		    this[key]=QueryString[key];
		}
	};

    var playerId = 38392191;
    var wid = '_27017';
    var ks = 'djJ8MjcwMTd8_K1ScaQcS_JOZt0-rm5vxaQ2O6EYZf1JXnxIu9VTC6dAB3_CJjqtkFr4jT5oAyKpagschMSDHkFi-4O7YkfQRTEiOAIx69dIA0b6tIfs1K0GO73Ok2eh6Cjo0hQc2nFkRBDiV6_o8CRjLT703GuGD3RN1voIkNsM6ga1b2W0-iUE7oYCG1uU4Mr4N832TPRc_PCNSXznF2CMwFgC4JH_ZRnaUFBFiZNZiIkFEg5L4aI=';
    var entry = "1_u2fkw38c";

    paramFromUrl("ks");
    paramFromUrl("wid");
    paramFromUrl("entry");
    paramFromUrl("playerId");


//    mw.setConfig( 'Kaltura.ServiceUrl' , 'http://lbd.kaltura.com' );
	kWidget.featureConfig({
		'targetId': 'kaltura_player',
		'wid': wid,
		'uiconf_id' : playerId,
		'flashvars': {
		    'autoPlay' : true,
            "chapters": {
                plugin: true
            },
            'ks': ks,
            "webcastPolls":{"plugin":"true","userId":"Eitan","userRole":"unmoderatedAdminRole"},
            "EmbedPlayer.LiveCuepoints" : true
		},
		'entry_id':  entry// vod : 1_bzr97hax | live : 1_afjmm4ie

	});

</script>
</body>
</html>